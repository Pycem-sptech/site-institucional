<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pycem</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/gerenciamentoMaquinas.css">
    <link rel="stylesheet" href="css/modal.css">
    <script src="./js/modal.js"></script>
    <script src="./js/geral.js"></script>
    <script src="./js/gerenciarMaquina.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
    
</head>
<body onload="validarSessao(), atualizarSelectUnidades(), atualizarMaquinasCadastradas()">
    <!-- UTILIZAR A ESTRUTURA HTML DE NAV E HEADER NAS DASHBOARDS COM DASHBOARD.CSS -->
    <nav class="sidebar">
        <div class="container">
            <div class="navigationButtons" id="navIcons">
                <h2>Py</h2>
                <img class="iconSidebar navigationIcon" src="img/userIcon.svg" onclick="redirectFunc()">
                <img class="iconSidebar navigationIcon" src="img/storeIcon.svg" onclick="redirectUnit()">
                <img class="iconSidebar navigationIcon" src="img/smartphoneIcon.svg">   <!-- onclick="redirectMachine()" -->
                <img class="iconSidebar navigationIcon" src="img/desktopIcon.svg">
                <img class="iconSidebar navigationIcon" src="img/supportIcon.svg">
            </div>
            <div class="footerButtons">
                <img class="iconSidebar" src="img/settingIcon.svg" onclick="redirectConfig()">
                <img class="iconSidebar" src="img/exitIcon.svg" onclick="limparSessao()">
            </div>
        </div>
    </nav>
    <header class="header">
        <div class="container">
            <h3 class="homeHeader">Home</h3>
            <nav id="nav" class="navbarHamburguer">
                <button id="btn-mobile" class="btn-mobile"><img class="menuImg" src="img/menu_FILL0_wght400_GRAD0_opsz48.svg"></button>
                <ul class="menu" id="menu">
                    <li onclick="redirectFunc()">Gerenciar Funcionarios</li>
                    <li onclick="redirectMachine()">Gerenciar Maquinas</li>
                    <li onclick="redirectAllUnits()">Gerenciar Unidades</li>
                    <li onclick="redirectConfig()">Configurações</li>
                    <li onclick="limparSessao()">Sair</li>
                </ul>
            </nav>
            <div class="user">
                <h4 id="usuarioLogado">Usuário</h4>
                <img class="iconUser" src="img/personIcon.svg">
            </div>
        </div>
    </header>
    <div class="guideText">
            <span class="welcomeSentence">Gerenciar Máquinas</span>
            <span class="firstStep">Máquinas</span>
    </div>
    <main class="main">
        <section class="registerUnit">
            <div class="formRegisterUnit">
                <h3 class="titleFormRegisterUnit">Cadastre suas máquinas</h3>
                <div class="boxInputUnit">
                    <select required class="inputRegisterUnit selectMachine" id="nameUnit" placeholder="Unidade">
                        <option value="" disabled selected>Unidade</option>
                     
                    </select>
                    <input class="inputRegisterUnit serialNumber" id="serialNumber" type="text" placeholder="Número de Série">
                    <input class="inputRegisterUnit processor" id="processor" type="text" placeholder="Processador">
                    <input class="inputRegisterUnit ram" id="ram" type="text" placeholder="Mem. RAM">
                    <select class="inputRegisterUnit storageSelect" id="storageSelect" placeholder="Armazenamento">
                        <option disabled selected>Armazenamento</option>
                        <option value="HD">HD</option>
                        <option value="SSD">SSD</option>
                    </select>
                    <input class="inputRegisterUnit storage" id="qtdArmazenamento" type="text" placeholder="Qtd. Armazenamento">
                </div>
                <button class="btnRegister" onclick="cadastrarMaquina()">Cadastrar</button>
            </div>
        </section>
        <section class="machine">
            <div class="boxMachine">
                <h3 class="titleBoxMachine">Máquinas cadastradas</h3>
                <hr>
                <div class="feed" id="feed">
                
                </div>
            </div>
            <div class="overlay" id="overlay">
                <div class="modal" id="modal">
                    <div class="headerModal">
                        <span class="tituloModal">Máquinas</span>
                        <span class="fecharModal btnFechar" onclick="fecharModal()"></span>
                    </div>
                    <div class="bodyModal">
                        <div class="bloco">
                            <span class="estilo tamanho1"><span class="subTitulo">Número de Série:</span>
                                <input class="inputModal" id="numeroDeSerieModal"></span>
                        </div>
        
                        <div class="bloco">
                            <span class="estilo tamanho2"><span class="subTitulo">Processador:</span>
                                <input class="inputModal" id="processadorModal"></span>
        
                            <span class="estilo tamanho2"><span class="subTitulo">Memória RAM:</span>
                                <input class="inputModal" id="memoriaRamModal"></span>
        
                            <span class="estilo tamanho3"><span class="subTitulo">Armazenamento:</span>
                                <select class="selectModal" id="escolherArmazenamentoModal">
                                    <option></option>
                                    <option value="HD">HD</option>
                                    <option value="SSD">SSD</option>
                                </select></span>
                        </div>
                        <div class="bloco">
                            <span class="estilo tamanho1"><span class="subTitulo">Qtd. Armazenamento:</span>
                                <input class="inputModal" id="qtdArmazenamentoModal"></span>
        
                        </div>
                    </div>
                    <div class="modalFooter">
                        <button class="btnSalvar" onclick="salvarEdicaoMaquina(sessionStorage.idTotem)">Salvar</button>
                    </div>
                </div>
        </section>
    </main>
</body>

</html>
<script>
    const menuHamb = document.getElementById("menu");
    const menuIcons = document.getElementById("navIcons");
    if (sessionStorage.USER_CARGO == "Tecnico") {
        menuHamb.innerHTML = `
            <li onclick="redirectMachine()">Cadastro de Máquinas</li>
            <li onclick="redirectMachine()">Gerenciar Máquinas</li>
            <li onclick="">Suporte</li>            
            <li onclick="">Configurações</li>
            <li onclick="limparSessao()">Sair</li>
            `
        menuIcons.innerHTML = `
        <h2>Py</h2>
                <img class="iconSidebar navigationIcon" src="img/smartphoneIcon.svg" onclick="redirectMachine()">
                <img class="iconSidebar navigationIcon" src="img/desktopIcon.svg">
                <img class="iconSidebar navigationIcon" src="img/supportIcon.svg">         
        `;
    } else if (sessionStorage.USER_CARGO == "Supervisor") {
        menuHamb.innerHTML = `
            <li onclick="redirectMachine()">Gerenciar Máquinas</li>
            <li onclick="">Suporte</li>            
            <li onclick="">Configurações</li>
            <li onclick="limparSessao()">Sair</li>
            `
        menuIcons.innerHTML = `
        <h2>Py</h2>
                <img class="iconSidebar navigationIcon" src="img/smartphoneIcon.svg" onclick="redirectMachine()">
                <img class="iconSidebar navigationIcon" src="img/desktopIcon.svg">
                <img class="iconSidebar navigationIcon" src="img/supportIcon.svg">         
        `;
    }
    $(document).ready(function(){
		$("#idCep").mask("99999-999");
		$("#idTelefoneUnidade").mask("(99) 99999-9999");
	});
    
    const btnMobile = document.getElementById('btn-mobile');

    function toggleMenu(event) {
      if (event.type === 'touchstart') event.preventDefault();  
    const nav = document.getElementById('nav');
    nav.classList.toggle('active');
    
    }
    var overlay = document.getElementById('overlay');
    overlay.addEventListener('click', function(e) {
    if (e.target == this){
        fecharModal()
    } ;
    });
    btnMobile.addEventListener('click', toggleMenu);
    btnMobile.addEventListener('touchstart', toggleMenu);
</script>
