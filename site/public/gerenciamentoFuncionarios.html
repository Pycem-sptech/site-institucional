<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pycem² | Ger. Funcionarios</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/gerenciamentoFuncionarios.css">
    <link rel="stylesheet" href="css/modal.css">
    <script src="./js/geral.js"></script>
    <script src="./js/modal.js"></script>
    <script src="./js/gerenciarFuncionario.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
</head>
<body id="body" onload="validarSessao(), atualizarFuncionariosCadastrados(), privarFuncTecnico()">
        <!-- UTILIZAR A ESTRUTURA HTML DE NAV E HEADER NAS DASHBOARDS COM DASHBOARD.CSS -->
        <nav class="sidebar">
            <div class="container">
                <div class="navigationButtons">
                    <h2 onclick="redirectHome()">Py</h2>
                    <img class="iconSidebar navigationIcon telaAtual" src="img/userIcon.svg"><!-- onclick="redirectFunc()" -->
                    <img class="iconSidebar navigationIcon" src="img/storeIcon.svg" onclick="redirectAllUnits()">
                    <img class="iconSidebar navigationIcon" src="img/smartphoneIcon.svg" onclick="redirectAllMach()">
                    <img class="iconSidebar navigationIcon" src="img/desktopIcon.svg" onclick="redirectVisaoGeral()">
                    <img class="iconSidebar navigationIcon" src="img/supportIcon.svg" onclick="redirectSuport()">
                </div>
                <div class="footerButtons">
                    <img class="iconSidebar" src="img/settingIcon.svg" onclick="redirectConfig()">
                    <img class="iconSidebar" src="img/exitIcon.svg" onclick="limparSessao()">
                </div>
            </div>
        </nav>
        <header class="header">
            <div class="container">
                <h3 class="homeHeader" style="cursor:pointer" onclick="redirectHome()">Home</h3>
                <nav id="nav" class="navbarHamburguer">
                    <button id="btn-mobile" class="btn-mobile"><img class="menuImg" src="img/menu_FILL0_wght400_GRAD0_opsz48.svg"></button>
                    <ul class="menu" id="menu">
                        <li  onclick="redirectFunc()">Gerenciar Funcionários</li>
                        <li onclick="redirectMachine()">Gerenciar Maquinas</li>
                        <li onclick="redirectAllUnits()">Unidades</li>
                        <li onclick="redirectVisaoGeral()">Visão Geral</li>
                        <li onclick="redirectConfig()">Configurações</li>
                        <li onclick="limparSessao()">Sair</li>
                    </ul>
                </nav>
                <div class="user">
                    <h4 class="usuarioLogado" onclick="redirectMeuPerfil()">Usuário</h4>
                    <img class="iconUser" src="img/personIcon.svg" onclick="redirectMeuPerfil()">
                </div>
            </div>
        </header>
        <div class="guideText">
                <span class="welcomeSentence">Gerenciar Funcionários</span>
                <span class="firstStep">Funcionários</span>
        </div>
        <main class="main">
            <section class="registerCompany">
                <div class="formRegisterCompany">
                    <h3 class="titleFormRegisterCompany">Cadastre seu Funcionário</h3>
                    <div class="inputCampo">
                    <select class="inputRegisterFuncionarios cargoFuncionario" id="selectCargo">
                        <option value="" disabled selected>Cargo</option>
                        <option value="Tecnico">Tecnico</option>
                        <option value="Supervisor">Supervisor</option>
                    </select>
                    <input class="inputRegisterFuncionarios nomeFuncionario" id="nomeFuncionario" type="text" placeholder="Nome Completo" >
                    <input class="inputRegisterFuncionarios cpfFuncionario" id="cpfFuncionario" onblur="validarCpf(this.value)" type="text" placeholder="CPF" >
                    <input class="inputRegisterFuncionarios emailFuncionario" id="emailFuncionario" onblur="validarEmail(this.value)" type="email" placeholder="Email">
                    <input class="inputRegisterFuncionarios password" type="password" id="password" placeholder="Senha">
                    <input class="inputRegisterFuncionarios password" id="confirmPassword" type="password" placeholder="Confirmação de Senha">
                    </div>
                    <button class="btnRegister" onclick="cadastrarFuncionario()">Cadastrar</button>
                </div>
            </section>
            <section class="registerUnit">
                <div class="formRegisterUnit">
                    <div class="container">
                        <h3 id="titleFormRegisterUnit" class="titleFormRegisterUnit">Funcionários </h3>
                        <input id="campoPesquisa" type="text" onkeyup="filtrarFuncionarios(this.value)">
                        <img onclick="pesquisar()"  id="btnSearch" src="img/search_FILL0_wght400_GRAD0_opsz48.svg">
                        <img onclick="fechar()" id="btnClose" src="img/close_FILL0_wght400_GRAD0_opsz48.svg">
                    </div>
                    <hr>
                    <div class="feed" id="feed">
                
                    </div>
                    
                </div>
            </section>
             <div class="overlay" id="overlay">
        <div class="modal" id="modal">
            <div class="headerModal">
                <span class="tituloModal">Funcionário</span>
                <span class="fecharModal btnFechar" onclick="fecharModal()"></span>
            </div>
            <div class="bodyModal">
                <div class="bloco">
                   
                    <span class="estilo tamanho1"><span class="subTitulo">Nome:</span>
                        <input class="inputModal" id="nomeFuncionarioModal"></span>
                </div>

                <div class="bloco">
                    <span class="estilo tamanho3"><span class="subTitulo">Cargo:</span>
                        <select class="selectModal" id="escolherCargoModal">
                            <option></option>
                            <option value="Supervisor">Supervisor</option>
                            <option value="Tecnico">Tecnico</option>
                        </select></span>

                    <span class="estilo tamanho1"><span class="subTitulo">Email:</span>
                        <input class="inputModal" id="emailModal"></span>

                    
                </div>
                <div class="bloco">
                    <span class="estilo tamanho1"><span class="subTitulo">CPF:</span>
                        <input class="inputModal" id="cpfModal"></span>

                        <span class="estilo tamanho1"><span class="subTitulo">Senha:</span>
                        <input class="inputModal" id="senhaModal" type="password"></span>
                </div>
            </div>
            <div class="modalFooter">
                <button class="btnSalvar" onclick="salvarEdicaoFuncionario(sessionStorage.idFuncionario)">Salvar</button>
            </div>
        </div>
        </main>
</body>
</html>
<script>
    $(document).ready(function () {
        $("#cpfFuncionario").mask("999.999.999-99");
    });

    const btnMobile = document.getElementById('btn-mobile');

    function toggleMenu(event) {
        if (event.type === 'touchstart') event.preventDefault();
        const nav = document.getElementById('nav');
        nav.classList.toggle('active');

    }
    var overlay = document.getElementById('overlay');
    overlay.addEventListener('click', function (e) {
        if (e.target == this) {
            fecharModal()
        };
    });
    btnMobile.addEventListener('click', toggleMenu);
    btnMobile.addEventListener('touchstart', toggleMenu);

    function pesquisar(){
        titleFormRegisterUnit.style.display = "none";
        btnSearch.style.display = "none";
        btnClose.style.display = "block";
        campoPesquisa.classList.add("show")
      
}
    function fechar(){
        campoPesquisa.classList.remove("show")
        setTimeout(function () {
        
            titleFormRegisterUnit.style.display = "block";
    }, 550);
        btnSearch.style.display = "block";
        btnClose.style.display = "none";
    }
</script>