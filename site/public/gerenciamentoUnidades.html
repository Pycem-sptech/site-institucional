<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pycem² | Cad. Unidade</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/cadastroUnidade.css">
    <link rel="stylesheet" href="css/modal.css">
    <script src="./js/modal.js"></script>
    <script src="./js/geral.js"></script>
    <script src="./js/gerenciarUnidade.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
    <!-- <script src="js/menu.js"></script> -->
</head>

<body id="body" onload="validarSessao(), atualizarUnidadesCadastradas(), privarFuncSupervisor(), privarFuncTecnico()">
    <!-- UTILIZAR A ESTRUTURA HTML DE NAV E HEADER NAS DASHBOARDS COM DASHBOARD.CSS -->
    <nav class="sidebar">
        <div class="container">
            <div class="navigationButtons" id="navIcons">
                <h2 onclick="redirectHome()">Py</h2>
                <img class="iconSidebar navigationIcon" src="img/userIcon.svg" onclick="redirectFunc()">
                <img class="iconSidebar navigationIcon" src="img/storeIcon.svg" onclick="redirectAllUnits()">
                <img class="iconSidebar navigationIcon" src="img/smartphoneIcon.svg" onclick="redirectAllMach()">
                <img class="iconSidebar navigationIcon" src="img/desktopIcon.svg" onclick="redirectVisaoGeral()">
                <img class="iconSidebar navigationIcon" src="img/supportIcon.svg" onclick="redirectSuport()">
            </div>
            <div class="footerButtons">
                <img class="iconSidebar" src="img/settingIcon.svg" onclick="redirectConfig()">
                <img class="iconSidebar" src="img/exitIcon.svg" onclick="limparSessao()">
            </div>
        </div>
    </nav>
    <header class="header">
        <div class="container">
            <h3 class="homeHeader" style="cursor:pointer" onclick="redirectHome()">Home</h3>
            <nav id="nav" class="navbarHamburguer">
                <button id="btn-mobile" class="btn-mobile"><img class="menuImg"
                        src="img/menu_FILL0_wght400_GRAD0_opsz48.svg"></button>
                <ul class="menu" id="menu">
                    <li onclick="redirectFunc()">Gerenciar Funcionarios</li>
                    <li onclick="redirectAllMach()">Gerenciar Maquinas</li>
                    <li onclick="redirectAllUnits()">Unidades</li>
                    <li onclick="redirectVisaoGeral()">Unidades</li>
                    <li onclick="redirectConfig()">Configurações</li>
                    <li onclick="limparSessao()">Sair</li>
                </ul>
            </nav>
            <div class="user">
                <h4 class="usuarioLogado"></h4>
                <img class="iconUser" src="img/personIcon.svg">
            </div>
        </div>
    </header>
    <div class="guideText">
        <span class="welcomeSentence">Gerenciar Unidades</span>
        <span class="firstStep">Unidades</span>
    </div>
    <main class="main">
        <section class="registerUnit">
            <div class="formRegisterUnit">
                <h3 class="titleFormRegisterUnit">Cadastre suas unidades</h3>
                <div class="boxInputUnit">
                    <input class="inputRegisterUnit nomeUnit" id="nomeUnit" type="text" placeholder="Nome">
                    <input class="inputRegisterUnit cepUnit" id="cepUnit" type="text" onblur="pesquisacep(this.value);"
                        placeholder="CEP" maxlength="8">
                    <input class="inputRegisterUnit ufUnit" id="ufUnit" type="text" placeholder="UF" maxlength="2">
                    <input class="inputRegisterUnit cidadeUnit" id="cidadeUnit" type="text" placeholder="Cidade">
                    <input class="inputRegisterUnit logradouroUnit" id="logradouroUnit" type="text"
                        placeholder="Logradouro">
                    <input class="inputRegisterUnit bairroUnit" id="bairroUnit" type="text" placeholder="Bairro">
                    <input class="inputRegisterUnit numeroUnit" id="numeroUnit" onblur="validarNumero(this.value)"
                        type="text" placeholder="Número">
                    <input class="inputRegisterUnit telefoneUnit" id="telefoneUnit" onblur="validarTelefone(this.value)"
                        type="tel" placeholder="Telefone">
                </div>
                <button class="btnRegister" onclick="cadastrarUni()">Cadastrar</button>
            </div>
        </section>
        <section class="units">
            <div class="boxUnits" id="boxUnits">
                <div class="container">
                    <h3 id="titleBoxUnit" class="titleBoxUnit">Unidades</h3>
                    <input id="campoPesquisa" type="text" onkeyup="filtrarUnidades(this.value)">
                    <img onclick="pesquisar()"  id="btnSearch" src="img/search_FILL0_wght400_GRAD0_opsz48.svg">
                    <img onclick="fechar()" id="btnClose" src="img/close_FILL0_wght400_GRAD0_opsz48.svg">
                </div>
                <hr>
                <div class="feed" id="feed">

                </div>

            </div>
            <div class="overlay" id="overlay">
                <div class="modal" id="modal">
                    <div class="headerModal">
                        <span class="tituloModal">Unidades</span>
                        <span class="fecharModal btnFechar" onclick="fecharModal()"></span>
                    </div>
                    <div class="bodyModal">
                        <div class="bloco">
                            <span class="estilo tamanho1"><span class="subTitulo">Nome:</span>
                                <input class="inputModal" id="nomeUnidadeModal"></span>
                            <span class="estilo tamanho1"><span class="subTitulo">CEP:</span>
                                <input class="inputModal" id="cepUnidadeModal"
                                    onblur="pesquisacepModal(this.value);"></span>
                        </div>

                        <div class="bloco">
                            <span class="estilo tamanho7"><span class="subTitulo">UF:</span>
                                <input class="inputModal" id="ufUnidadeModal" disabled></span>

                            <span class="estilo tamanho2"><span class="subTitulo">Cidade:</span>
                                <input class="inputModal" id="cidadeUnidadeModal" disabled></span>

                            <span class="estilo tamanho8"><span class="subTitulo">Logradouro:</span>
                                <input class="inputModal" id="logradouroUnidadeModal" disabled></span>

                        </div>
                        <div class="bloco">
                            <span class="estilo tamanho2"><span class="subTitulo">Bairro:</span>
                                <input class="inputModal" id="bairroUnidadeModal" disabled></span>

                            <span class="estilo tamanho6"><span class="subTitulo">Numero:</span>
                                <input class="inputModal" id="numeroUnidadeModal" ></span>

                            <span class="estilo tamanho1"><span class="subTitulo">Telefone:</span>
                                <input class="inputModal" id="telefoneUnidadeModal"></span>
                        </div>
                    </div>
                    <div class="modalFooter">
                        <button class="btnSalvar" id="btn1"
                            onclick="salvarEdicaoUnidade(sessionStorage.ID_SELECIONADO)">Salvar</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>

</html>
<script>
    
    $(document).ready(function () {
        $("#cepUnit").mask("99999-999");
        $("#cepUnidadeModal").mask("99999-999");
        $("#telefoneUnit").mask("(99) 99999-9999");
        $("#telefoneUnidadeModal").mask("(99) 99999-9999");
    });

    var fkEmpresa = sessionStorage.fkEmpresa;
    if (fkEmpresa == null) {
        autenticar()
    }

    const btnMobile = document.getElementById('btn-mobile');

    function toggleMenu(event) {
        if (event.type === 'touchstart') event.preventDefault();
        const nav = document.getElementById('nav');
        nav.classList.toggle('active');

    }
    var overlay = document.getElementById('overlay');
    overlay.addEventListener('click', function (e) {
        if (e.target == this) {
            fecharModal()
        };
    });
    btnMobile.addEventListener('click', toggleMenu);
    btnMobile.addEventListener('touchstart', toggleMenu);

    function pesquisar(){
        titleBoxUnit.style.display = "none";
        btnSearch.style.display = "none";
        btnClose.style.display = "block";
        campoPesquisa.classList.add("show")
      
    }
    function fechar(){
        campoPesquisa.classList.remove("show")
        setTimeout(function () {
        
            titleBoxUnit.style.display = "block";
    }, 550);
        btnSearch.style.display = "block";
        btnClose.style.display = "none";
    }
</script>